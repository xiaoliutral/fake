<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Outbox + Inbox æ¨¡å¼æ¶æ„å›¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            width: 100%;
        }

        h1 {
            color: white;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 40px;
        }

        .diagram-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .section-title {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 6px;
            height: 30px;
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 3px;
        }

        .flow-container {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px 0;
        }

        .box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 25px;
            border-radius: 15px;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .box:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .box-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .box-subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .box.database {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .box.rabbitmq {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .box.service {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .box.consumer {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .arrow {
            color: #667eea;
            font-size: 2em;
            font-weight: bold;
        }

        .vertical-arrow {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .vertical-arrow::after {
            content: 'â¬‡';
            font-size: 2em;
            color: #667eea;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card h3::before {
            content: 'âœ“';
            background: #667eea;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .feature-card p {
            color: #555;
            line-height: 1.6;
        }

        .multi-instance {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .instance-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .instance-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 0.9em;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .lock-icon {
            font-size: 1.5em;
            color: #f5576c;
        }

        .badge {
            display: inline-block;
            background: #43e97b;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .flow-container {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“¦ Outbox + Inbox æ¨¡å¼æ¶æ„å›¾</h1>
        <p class="subtitle">Event-Driven Architecture with Guaranteed Delivery & Idempotency</p>

        <!-- Outbox æ¨¡å¼ -->
        <div class="diagram-section">
            <h2 class="section-title">å‘é€ç«¯ï¼šOutbox æ¨¡å¼ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</h2>
            
            <div class="flow-container">
                <div class="box service">
                    <div class="box-title">ğŸ¢ ä¸šåŠ¡æœåŠ¡</div>
                    <div class="box-subtitle">è®¢å•æœåŠ¡ / æ”¯ä»˜æœåŠ¡</div>
                </div>

                <div class="arrow">â†’</div>

                <div class="box database">
                    <div class="box-title">ğŸ’¾ Outbox è¡¨</div>
                    <div class="box-subtitle">äº‹ä»¶æš‚å­˜<br>ï¼ˆåŒä¸€äº‹åŠ¡ï¼‰</div>
                </div>

                <div class="arrow">â†</div>

                <div class="box">
                    <div class="box-title">âš™ï¸ åå°å‘å¸ƒæœåŠ¡</div>
                    <div class="box-subtitle">å®šæœŸæ‰«æ<br>ï¼ˆ10ç§’/æ¬¡ï¼‰</div>
                </div>
            </div>

            <div class="vertical-arrow"></div>

            <div class="flow-container">
                <div class="box rabbitmq">
                    <div class="box-title">ğŸ° RabbitMQ</div>
                    <div class="box-subtitle">æ¶ˆæ¯é˜Ÿåˆ—</div>
                </div>
            </div>

            <div class="feature-list">
                <div class="feature-card">
                    <h3>åŸå­æ€§ä¿è¯</h3>
                    <p>ä¸šåŠ¡æ•°æ®å’Œäº‹ä»¶åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­å†™å…¥ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>å¯é æŠ•é€’</h3>
                    <p>åå°æœåŠ¡ä¸æ–­é‡è¯•ï¼Œç›´åˆ°æ¶ˆæ¯æˆåŠŸå‘é€åˆ° RabbitMQï¼Œç¡®ä¿ä¸ä¸¢æ¶ˆæ¯ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>å¤±è´¥é‡è¯•</h3>
                    <p>å‘é€å¤±è´¥çš„äº‹ä»¶ä¼šè¢«æ ‡è®°ä¸º Failedï¼Œæ”¯æŒæ‰‹åŠ¨æˆ–è‡ªåŠ¨é‡è¯•æœºåˆ¶ã€‚</p>
                </div>
            </div>
        </div>

        <!-- Inbox æ¨¡å¼ -->
        <div class="diagram-section">
            <h2 class="section-title">æ¥æ”¶ç«¯ï¼šInbox æ¨¡å¼ï¼ˆå¹‚ç­‰æ€§ä¿è¯ï¼‰</h2>
            
            <div class="flow-container">
                <div class="box rabbitmq">
                    <div class="box-title">ğŸ° RabbitMQ</div>
                    <div class="box-subtitle">æ¶ˆæ¯é˜Ÿåˆ—</div>
                </div>

                <div class="arrow">â†’</div>

                <div class="box consumer">
                    <div class="box-title">ğŸ“¥ æ¶ˆè´¹è€…</div>
                    <div class="box-subtitle">å¹‚ç­‰æ€§æ£€æŸ¥<br>ä¸šåŠ¡å¤„ç†</div>
                </div>

                <div class="arrow">â†’</div>

                <div class="box database">
                    <div class="box-title">ğŸ’¾ Inbox è¡¨</div>
                    <div class="box-subtitle">å»é‡è®°å½•<br>ï¼ˆå·²å¤„ç†äº‹ä»¶ï¼‰</div>
                </div>
            </div>

            <div class="feature-list">
                <div class="feature-card">
                    <h3>è‡ªåŠ¨å»é‡</h3>
                    <p>å¤„ç†æ¶ˆæ¯å‰å…ˆæ£€æŸ¥ Inbox è¡¨ï¼Œå·²å¤„ç†è¿‡çš„æ¶ˆæ¯ç›´æ¥è·³è¿‡ï¼Œé¿å…é‡å¤æ‰§è¡Œã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>At-Least-Once</h3>
                    <p>é…åˆ RabbitMQ çš„ At-Least-Once è¯­ä¹‰ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±ä¸”ä¸é‡å¤å¤„ç†ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>è‡ªåŠ¨æ¸…ç†</h3>
                    <p>åå°æœåŠ¡æ¯å¤©è‡ªåŠ¨æ¸…ç† 7 å¤©å‰çš„è®°å½•ï¼Œé˜²æ­¢ Inbox è¡¨æ— é™å¢é•¿ã€‚</p>
                </div>
            </div>
        </div>

        <!-- å¤šå®ä¾‹éƒ¨ç½² -->
        <div class="diagram-section">
            <h2 class="section-title">å¤šå®ä¾‹éƒ¨ç½²ï¼ˆåˆ†å¸ƒå¼é”ï¼‰<span class="badge">NEW</span></h2>
            
            <div class="multi-instance">
                <div style="text-align: center; color: #667eea; font-size: 1.2em; margin-bottom: 20px; font-weight: bold;">
                    ğŸ”’ æ•°æ®åº“è¡Œçº§é” - åŸå­æ›´æ–°æœºåˆ¶
                </div>

                <div class="instance-row">
                    <div class="instance-box">å®ä¾‹ 1</div>
                    <div class="instance-box">å®ä¾‹ 2</div>
                    <div class="instance-box">å®ä¾‹ 3</div>
                </div>

                <div style="text-align: center; margin: 15px 0; color: #667eea; font-size: 1.5em;">
                    â¬‡ï¸ å°è¯•æŠ¢å é”
                </div>

                <div class="instance-row">
                    <div class="box database" style="min-width: 400px;">
                        <div class="box-title">Outbox è¡¨ï¼ˆåˆ†å¸ƒå¼é”ï¼‰</div>
                        <div class="box-subtitle">WHERE State = NotPublished<br>UPDATE SET State = InProgress</div>
                    </div>
                </div>

                <div style="text-align: center; margin: 15px 0; color: #667eea; font-size: 1.5em;">
                    â¬‡ï¸ åªæœ‰ä¸€ä¸ªå®ä¾‹æˆåŠŸ
                </div>

                <div class="instance-row">
                    <div class="instance-box" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        å®ä¾‹ 1 âœ“<br><small>è·å–é”æˆåŠŸ</small>
                    </div>
                    <div class="instance-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); opacity: 0.6;">
                        å®ä¾‹ 2 âœ—<br><small>è·³è¿‡å¤„ç†</small>
                    </div>
                    <div class="instance-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); opacity: 0.6;">
                        å®ä¾‹ 3 âœ—<br><small>è·³è¿‡å¤„ç†</small>
                    </div>
                </div>
            </div>

            <div class="feature-list" style="margin-top: 30px;">
                <div class="feature-card">
                    <h3>æ— å¤–éƒ¨ä¾èµ–</h3>
                    <p>åˆ©ç”¨æ•°æ®åº“çš„åŸå­æ›´æ–°æ“ä½œï¼Œæ— éœ€ Redis æˆ– ZooKeeperï¼Œé™ä½æ¶æ„å¤æ‚åº¦ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>æ°´å¹³æ‰©å±•</h3>
                    <p>æ”¯æŒå¤šå®ä¾‹åŒæ—¶è¿è¡Œï¼Œè‡ªåŠ¨åè°ƒï¼Œé¿å…é‡å¤å¤„ç†ï¼Œé€‚åˆ Kubernetes éƒ¨ç½²ã€‚</p>
                </div>
                <div class="feature-card">
                    <h3>é«˜å¯ç”¨æ€§</h3>
                    <p>ä»»ä¸€å®ä¾‹å´©æºƒï¼Œå…¶ä»–å®ä¾‹è‡ªåŠ¨æ¥ç®¡ï¼Œç¡®ä¿äº‹ä»¶æœ€ç»ˆè¢«å‘é€ã€‚</p>
                </div>
            </div>
        </div>

        <!-- æ•°æ®æµ -->
        <div class="diagram-section">
            <h2 class="section-title">å®Œæ•´æ•°æ®æµç¤ºä¾‹</h2>
            
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; line-height: 2;">
                <div style="color: #667eea; font-weight: bold; margin-bottom: 15px;">ğŸ“ åœºæ™¯ï¼šç”¨æˆ·åˆ›å»ºè®¢å•</div>
                
                <div style="margin-left: 20px;">
                    <div><strong>1ï¸âƒ£ å‘é€ç«¯ï¼ˆè®¢å•æœåŠ¡ï¼‰ï¼š</strong></div>
                    <div style="margin-left: 20px; color: #555;">
                        âœ å¼€å¯æ•°æ®åº“äº‹åŠ¡<br>
                        âœ ä¿å­˜è®¢å•æ•°æ®åˆ° Orders è¡¨<br>
                        âœ ä¿å­˜ OrderCreatedEvent åˆ° Outbox è¡¨<br>
                        âœ æäº¤äº‹åŠ¡ï¼ˆåŸå­æ€§ä¿è¯ï¼‰
                    </div>

                    <div style="margin-top: 15px;"><strong>2ï¸âƒ£ åå°å‘å¸ƒæœåŠ¡ï¼š</strong></div>
                    <div style="margin-left: 20px; color: #555;">
                        âœ æ¯ 10 ç§’æ‰«æ Outbox è¡¨<br>
                        âœ å°è¯•è·å–åˆ†å¸ƒå¼é”ï¼ˆå¤šå®ä¾‹åªæœ‰ä¸€ä¸ªæˆåŠŸï¼‰<br>
                        âœ å‘é€ OrderCreatedEvent åˆ° RabbitMQ<br>
                        âœ æ ‡è®°äº‹ä»¶ä¸ºå·²å‘å¸ƒ
                    </div>

                    <div style="margin-top: 15px;"><strong>3ï¸âƒ£ æ¥æ”¶ç«¯ï¼ˆåº“å­˜æœåŠ¡ï¼‰ï¼š</strong></div>
                    <div style="margin-left: 20px; color: #555;">
                        âœ ä» RabbitMQ æ¥æ”¶æ¶ˆæ¯<br>
                        âœ æ£€æŸ¥ Inbox è¡¨ï¼ˆæ˜¯å¦å·²å¤„ç†è¿‡ï¼Ÿï¼‰<br>
                        âœ å¦‚æœæœªå¤„ç†ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆæ‰£å‡åº“å­˜ï¼‰<br>
                        âœ ä¿å­˜äº‹ä»¶ ID åˆ° Inbox è¡¨<br>
                        âœ Ack æ¶ˆæ¯
                    </div>

                    <div style="margin-top: 15px;"><strong>4ï¸âƒ£ æ¸…ç†æœåŠ¡ï¼š</strong></div>
                    <div style="margin-left: 20px; color: #555;">
                        âœ æ¯å¤©æ¸…ç† 7 å¤©å‰çš„ Inbox è®°å½•<br>
                        âœ ä¿æŒè¡¨å¤§å°ç¨³å®š
                    </div>
                </div>
            </div>
        </div>

        <!-- æ³¨æ„äº‹é¡¹ -->
        <div class="diagram-section">
            <h2 class="section-title">âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h2>
            
            <div class="feature-list">
                <div class="feature-card" style="border-left-color: #f5576c;">
                    <h3>Token è‡ªåŠ¨ä¼ é€’</h3>
                    <p>åœ¨åˆ†å¸ƒå¼è°ƒç”¨é“¾ä¸­ï¼Œéœ€è¦è‡ªåŠ¨ä¼ é€’ç”¨æˆ·èº«ä»½ Tokenï¼ˆJWT/OAuthï¼‰ï¼Œç¡®ä¿ä¸‹æ¸¸æœåŠ¡èƒ½å¤Ÿè·å–å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #43e97b;">
                    <h3>æ¶ˆè´¹ç«¯é‡è¯•æœºåˆ¶</h3>
                    <p>æ”¯æŒæ¶ˆè´¹ç«¯è‡ªåŠ¨é‡è¯•ï¼ˆé»˜è®¤3æ¬¡ï¼Œå¯é…ç½®ï¼‰ï¼Œé‡è¯•é—´éš”é‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼ˆ1s, 2s, 4s...ï¼‰ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #fa709a;">
                    <h3>å¹‚ç­‰æ€§è¾¹ç•Œ</h3>
                    <p><strong>å…³é”®ï¼š</strong>Inbox åªä¿è¯æ¶ˆæ¯è¢«<strong>ä¸€ä¸ªæ¶ˆè´¹è€…</strong>æ¶ˆè´¹åˆ°ï¼Œä¸€æ—¦è¿›å…¥é‡è¯•ï¼Œ<strong>æ¶ˆè´¹æ–¹æ³•çš„å¹‚ç­‰æ€§éœ€è¦ä¸šåŠ¡è‡ªå·±æ§åˆ¶</strong>ï¼ˆå¦‚è®¢å•çŠ¶æ€æ£€æŸ¥ï¼‰ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #4facfe;">
                    <h3>åˆ†å¸ƒå¼äº‹åŠ¡é›†æˆ DTM</h3>
                    <p>å¯¹äºå¼ºä¸€è‡´æ€§éœ€æ±‚ï¼Œè€ƒè™‘é›†æˆ <a href="https://en.dtm.pub/" target="_blank" style="color: #667eea;">DTM åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶</a>ï¼Œæ”¯æŒ TCCã€SAGAã€XA ç­‰æ¨¡å¼ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #fee140;">
                    <h3>åˆ†å¸ƒå¼äº‹åŠ¡ vs æœ€ç»ˆä¸€è‡´æ€§</h3>
                    <p><strong>æ€è€ƒï¼š</strong>åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆDTMï¼‰çœŸçš„éœ€è¦æ··ç”¨æœ€ç»ˆä¸€è‡´æ€§ï¼ˆOutboxï¼‰å—ï¼Ÿå»ºè®®æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼šå¼ºä¸€è‡´ç”¨ DTMï¼Œå¼‚æ­¥ç”¨ Outboxã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #f5576c;">
                    <h3>æ­»ä¿¡é˜Ÿåˆ— + äººå·¥å¤„ç†</h3>
                    <p>é‡è¯•è¾¾åˆ°æœ€å¤§æ¬¡æ•°åï¼Œæ¶ˆæ¯è‡ªåŠ¨è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLXï¼‰ï¼Œ<strong>éœ€è¦æ¥å…¥å‘Šè­¦ç³»ç»Ÿ</strong>ï¼ˆé’‰é’‰/ä¼ä¸šå¾®ä¿¡ï¼‰ï¼Œé€šçŸ¥è¿ç»´äººå·¥ä»‹å…¥ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #764ba2;">
                    <h3>é“¾è·¯è¿½è¸ª + å¯è§†åŒ–</h3>
                    <p>æ¥å…¥ OpenTelemetry æˆ– SkyWalkingï¼Œå®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªã€‚<strong>éœ€è¦å¼€å‘å¯è§†åŒ–é¢æ¿</strong>ï¼Œå®æ—¶ç›‘æ§æ¶ˆæ¯æµè½¬çŠ¶æ€ï¼ˆå‘å¸ƒç‡ã€æ¶ˆè´¹ç‡ã€å¤±è´¥ç‡ï¼‰ã€‚</p>
                </div>
            </div>
        </div>

        <!-- æŠ€æœ¯ç»†èŠ‚ -->
        <div class="diagram-section">
            <h2 class="section-title">ğŸ”§ æ ¸å¿ƒæŠ€æœ¯ç»†èŠ‚</h2>
            
            <div class="feature-list">
                <div class="feature-card" style="border-left-color: #667eea;">
                    <h3>å‘å¸ƒç«¯ï¼šåƒµå°¸é”æ¢å¤</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>å®ä¾‹å´©æºƒå¯¼è‡´é”æ°¸ä¹…å ç”¨ã€‚<br>
                       <strong>æ–¹æ¡ˆï¼š</strong>æ‰«æçº¿ç¨‹æ£€æµ‹ <code>LockExpiresAt < Now</code>ï¼Œå¼ºåˆ¶é‡Šæ”¾åƒµå°¸é”ï¼ˆé»˜è®¤5åˆ†é’Ÿè¶…æ—¶ï¼‰ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #43e97b;">
                    <h3>æ¶ˆè´¹ç«¯ï¼šæ—¶é—´çª—å£ç†”æ–­</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>æ¶ˆæ¯ç§¯å‹å¯¼è‡´æœåŠ¡è¿‡è½½ã€‚<br>
                       <strong>æ–¹æ¡ˆï¼š</strong>æ£€æµ‹æ¶ˆæ¯åˆ›å»ºæ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´çª—å£ï¼ˆå¦‚30åˆ†é’Ÿï¼‰è‡ªåŠ¨åˆ‡æ–­æ¶ˆè´¹ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #f093fb;">
                    <h3>å¹¶å‘æ‰¹é‡å¤„ç†</h3>
                    <p>å‘å¸ƒç«¯æ”¯æŒæ‰¹é‡æ‰«æï¼ˆé»˜è®¤100æ¡ï¼‰ï¼Œä½¿ç”¨ <code>Task.WhenAll</code> å¹¶å‘å‘é€ï¼Œæå‡ååé‡ï¼ˆå•å®ä¾‹å¯è¾¾ 1000+ msg/sï¼‰ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #fa709a;">
                    <h3>æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–</h3>
                    <p>å…³é”®ç´¢å¼•ï¼š<code>IX_State_CreationTime</code>ã€<code>IX_TransactionId</code>ï¼Œç¡®ä¿æ‰«ææŸ¥è¯¢æ€§èƒ½ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰ã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #4facfe;">
                    <h3>äº‹åŠ¡æŠ½è±¡å±‚</h3>
                    <p>æ”¯æŒ EF Core Transaction å’Œ TransactionScopeï¼Œè‡ªåŠ¨æ£€æµ‹å½“å‰äº‹åŠ¡ä¸Šä¸‹æ–‡ï¼Œ<strong>æ— éœ€æ‰‹åŠ¨åˆ›å»º</strong> TransactionContextã€‚</p>
                </div>
                
                <div class="feature-card" style="border-left-color: #fee140;">
                    <h3>çŠ¶æ€æœºè®¾è®¡</h3>
                    <p><strong>Outboxï¼š</strong>æœªå‘å¸ƒ â†’ å‘å¸ƒä¸­ â†’ å·²å‘å¸ƒ/å‘å¸ƒå¤±è´¥<br>
                       <strong>Inboxï¼š</strong>æ¶ˆè´¹ä¸­ â†’ æ¶ˆè´¹æˆåŠŸ/æ¶ˆè´¹å¤±è´¥<br>
                       æ‰€æœ‰çŠ¶æ€ç»Ÿä¸€åœ¨ <code>EventState</code> æšä¸¾ä¸­ã€‚</p>
                </div>
            </div>
        </div>

        <!-- å¯è§†åŒ–é¢æ¿éœ€æ±‚ -->
        <div class="diagram-section">
            <h2 class="section-title">ğŸ“Š å¯è§†åŒ–é¢æ¿éœ€æ±‚</h2>
            
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #667eea;">
                        <div style="font-size: 2em; color: #667eea; margin-bottom: 10px;">ğŸ“ˆ</div>
                        <div style="font-weight: bold; margin-bottom: 5px;">å®æ—¶ç›‘æ§</div>
                        <div style="color: #555; font-size: 0.9em;">
                            â€¢ æ¶ˆæ¯å‘å¸ƒé€Ÿç‡ï¼ˆmsg/sï¼‰<br>
                            â€¢ æ¶ˆæ¯æ¶ˆè´¹é€Ÿç‡ï¼ˆmsg/sï¼‰<br>
                            â€¢ ç§¯å‹æ¶ˆæ¯æ•°é‡<br>
                            â€¢ å¤±è´¥ç‡ç»Ÿè®¡
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #43e97b;">
                        <div style="font-size: 2em; color: #43e97b; margin-bottom: 10px;">ğŸ”</div>
                        <div style="font-weight: bold; margin-bottom: 5px;">é“¾è·¯è¿½è¸ª</div>
                        <div style="color: #555; font-size: 0.9em;">
                            â€¢ äº‹ä»¶å®Œæ•´ç”Ÿå‘½å‘¨æœŸ<br>
                            â€¢ è·¨æœåŠ¡è°ƒç”¨é“¾<br>
                            â€¢ è€—æ—¶åˆ†æï¼ˆP50/P99ï¼‰<br>
                            â€¢ å¤±è´¥åŸå› å®šä½
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #f5576c;">
                        <div style="font-size: 2em; color: #f5576c; margin-bottom: 10px;">ğŸš¨</div>
                        <div style="font-weight: bold; margin-bottom: 5px;">å‘Šè­¦é€šçŸ¥</div>
                        <div style="color: #555; font-size: 0.9em;">
                            â€¢ æ­»ä¿¡é˜Ÿåˆ—æ¶ˆæ¯å‘Šè­¦<br>
                            â€¢ æ¶ˆè´¹å¤±è´¥ç‡è¶…é˜ˆå€¼<br>
                            â€¢ ç§¯å‹æ¶ˆæ¯è¶…è¿‡é™åˆ¶<br>
                            â€¢ å®ä¾‹å¥åº·çŠ¶æ€
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #fa709a;">
                        <div style="font-size: 2em; color: #fa709a; margin-bottom: 10px;">ğŸ› ï¸</div>
                        <div style="font-weight: bold; margin-bottom: 5px;">è¿ç»´å·¥å…·</div>
                        <div style="color: #555; font-size: 0.9em;">
                            â€¢ æ‰‹åŠ¨é‡è¯•æ­»ä¿¡æ¶ˆæ¯<br>
                            â€¢ æ‰¹é‡æ¸…ç†è¿‡æœŸæ•°æ®<br>
                            â€¢ é…ç½®åŠ¨æ€è°ƒæ•´<br>
                            â€¢ å®ä¾‹æµé‡è°ƒåº¦
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align: center; color: white; margin-top: 40px; opacity: 0.8;">
            <p>ğŸ¨ Created with â¤ï¸ by Cascade AI</p>
            <p style="font-size: 0.9em; margin-top: 5px;">Event-Driven Microservices Architecture v2.0</p>
        </div>
    </div>
</body>
</html>
